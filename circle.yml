machine:
  python:
    version: 3.6.2

cache_directories:
    - node_modules

dependencies:
  pre:
    - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.3/install.sh | bash
    - nvm install 6.9.4
    - nvm use 6.9.4
    - npm install -g yarn
    - python --version

  override:
    - yarn install
    - pip3 install -r python/requirements.txt

compile:
  override:
    - npm run -s build:prod
    - npm run -s build-python

deployment:
  override:
    - npm run -s package --win nsis
experimental:
  notify:
    branches:
      only:
        - master
        - stable
